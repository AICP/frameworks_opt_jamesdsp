#ifndef __TUBE_H__
#define __TUBE_H__
#include "wdfcircuits_triode.h"
typedef struct str_tubeFilter
{
    Triode v;
    TubeStageCircuit ckt;
    Real e;
    Real ci;
    Real ck;
    Real co;
    Real ro;
    Real rp;
    Real rg;
    Real ri;
	Real rk;
    float overdrived1Gain;
    float overdrived2Gain;
    float   fConst0;
    float   fConst1;
    float   fConst2;
    float   fConst3;
    float   fRec0[4];
    float   fRec1[4];
    float   fRec2[4];
    float   fRec3[4];
    float   fRec4[4];
    float   fRec5[4];
    float   fRec6[4];
    float   fRec7[4];
    float   fRec8[4];
    float   fRec9[4];
    float   fRec10[4];
    float   fRec11[4];
    float   fRec12[4];
    float   fRec13[4];
    float   fConst4;
    float   fConst5;
    float   fRec14[4];
    float   fConst6;
    float   fRec15[4];
    float   fRec16[4];
    float   fRec17[4];
    float   fRec18[4];
    float   fRec19[4];
    float   fRec20[4];
    float   fRec21[4];
    float   fRec22[4];
    float   fRec23[4];
    float   fRec24[4];
	float toneStack16;
	float toneStack14;
	float toneStack13;
	float toneStack11;
	float toneStack47;
	float toneStack45;
	float toneStack44;
	float toneStack42;
	float toneStack75;
	float toneStack73;
	float toneStack72;
	float toneStack70;
	float toneStack102;
	float toneStack100;
	float toneStack99;
	float toneStack97;
	float toneStack128;
	float toneStack126;
	float toneStack125;
	float toneStack123;
	float toneStack157;
	float toneStack155;
	float toneStack154;
	float toneStack152;
	float toneStack186;
	float toneStack184;
	float toneStack183;
	float toneStack181;
	float toneStack212;
	float toneStack210;
	float toneStack209;
	float toneStack207;
	float toneStack237;
	float toneStack235;
	float toneStack234;
	float toneStack232;
	float toneStack265;
	float toneStack263;
	float toneStack262;
	float toneStack260;
	float toneStack292;
	float toneStack290;
	float toneStack289;
	float toneStack287;
	float toneStack320;
	float toneStack318;
	float toneStack317;
	float toneStack315;
	float toneStack346;
	float toneStack344;
	float toneStack343;
	float toneStack341;
	float toneStack373;
	float toneStack371;
	float toneStack370;
	float toneStack368;
	float toneStack397;
	float toneStack395;
	float toneStack394;
	float toneStack392;
	float toneStack423;
	float toneStack421;
	float toneStack420;
	float toneStack418;
	float toneStack450;
	float toneStack448;
	float toneStack447;
	float toneStack445;
	float toneStack479;
	float toneStack477;
	float toneStack476;
	float toneStack474;
	float toneStack507;
	float toneStack505;
	float toneStack504;
	float toneStack502;
	float toneStack531;
	float toneStack529;
	float toneStack528;
	float toneStack526;
	float toneStack552;
	float toneStack550;
	float toneStack549;
	float toneStack547;
	float toneStack575;
	float toneStack573;
	float toneStack572;
	float toneStack570;
	float toneStack602;
	float toneStack600;
	float toneStack599;
	float toneStack597;
	float toneStack626;
	float toneStack624;
	float toneStack623;
	float toneStack621;
	float toneStack652;
	float toneStack650;
	float toneStack649;
	float toneStack647;
	float toneStack664;
	float toneStack663;
	float toneStack662;
	float toneStack660;
	float toneStack658;
	float toneStack638;
	float toneStack637;
	float toneStack636;
	float toneStack634;
	float toneStack632;
	float toneStack614;
	float toneStack613;
	float toneStack612;
	float toneStack610;
	float toneStack608;
	float toneStack588;
	float toneStack587;
	float toneStack586;
	float toneStack584;
	float toneStack582;
	float toneStack561;
	float toneStack560;
	float toneStack559;
	float toneStack558;
	float toneStack556;
	float toneStack540;
	float toneStack539;
	float toneStack538;
	float toneStack537;
	float toneStack535;
	float toneStack519;
	float toneStack518;
	float toneStack517;
	float toneStack515;
	float toneStack513;
	float toneStack493;
	float toneStack492;
	float toneStack491;
	float toneStack489;
	float toneStack487;
	float toneStack463;
	float toneStack462;
	float toneStack461;
	float toneStack459;
	float toneStack457;
	float toneStack435;
	float toneStack434;
	float toneStack433;
	float toneStack431;
	float toneStack429;
	float toneStack409;
	float toneStack408;
	float toneStack407;
	float toneStack405;
	float toneStack403;
	float toneStack385;
	float toneStack384;
	float toneStack383;
	float toneStack381;
	float toneStack379;
	float toneStack358;
	float toneStack357;
	float toneStack356;
	float toneStack354;
	float toneStack352;
	float toneStack332;
	float toneStack331;
	float toneStack330;
	float toneStack328;
	float toneStack326;
	float toneStack305;
	float toneStack304;
	float toneStack303;
	float toneStack301;
	float toneStack299;
	float toneStack277;
	float toneStack276;
	float toneStack275;
	float toneStack273;
	float toneStack271;
	float toneStack250;
	float toneStack249;
	float toneStack248;
	float toneStack246;
	float toneStack244;
	float toneStack224;
	float toneStack223;
	float toneStack222;
	float toneStack220;
	float toneStack218;
	float toneStack198;
	float toneStack197;
	float toneStack196;
	float toneStack194;
	float toneStack192;
	float toneStack171;
	float toneStack170;
	float toneStack169;
	float toneStack167;
	float toneStack165;
	float toneStack140;
	float toneStack139;
	float toneStack138;
	float toneStack136;
	float toneStack134;
	float toneStack114;
	float toneStack113;
	float toneStack112;
	float toneStack110;
	float toneStack108;
	float toneStack88;
	float toneStack87;
	float toneStack86;
	float toneStack84;
	float toneStack82;
	float toneStack60;
	float toneStack59;
	float toneStack58;
	float toneStack56;
	float toneStack54;
	float toneStack32;
	float toneStack30;
	float toneStack29;
	float toneStack27;
	float toneStack25;
	double pa0, pa1, pa2, pb0, pb1, pb2;
	double v1, v2;
} tubeFilter;
int InitTube(tubeFilter *tubefilter, double *circuitparameters, float samplerate, float tubedrive, float bass, float middle, float treble, int tonestack, int warmupDuration, int insane);
void processTube(tubeFilter *tubefilter, float* inputs, float* outputs, unsigned frames);
#endif